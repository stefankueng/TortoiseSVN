<chapter id="tmerge-ch-2">

	<title>Using TortoiseMerge</title>
	
	<simplesect>
		<para>
		</para>
	</simplesect>


	<!-- ================================================================= -->
	<!-- ======================== SECTION 1 ============================== -->
	<!-- ================================================================= -->
	<sect1 id="tmerge-ch-2-sect-1">
		
		<title>Open Files</title>
		<?dbhh topicname="HIDD_OPENDLG"?>
	
		<para>
		When you start TortoiseMerge without any command line switches then
		you have to manually open the files. Under the <guimenuitem>File
		</guimenuitem> menu you will find the command <guimenuitem>Open
		</guimenuitem>.
		</para>

		<para>
			<graphic srccredit="The Open Dialog" fileref="images/MergeOpen.png"/>
		</para>

		<para>
		The first thing you have to do is to decide if you want to just compare/
		merge files or if you want to apply a patchfile. Depending on what you
		choose the corresponding edit boxes and browse buttons get activated.
		</para>
		
		<sect2 id="tmerge-ch-2-sect-1-1">
		
			<title>Viewing / Merging</title>
			
			<para>
			If you want to compare/merge files you have to set at least two 
			of the three possible paths for "Base", "Yours" and "Theirs". 
			If you select only two files, then TortoiseMerge will show 
			you the differences between those two files, either in a two 
			pane view or in a one pane view. You can switch between 
			those two views with the menu command <guimenuitem>One Pane View
			</guimenuitem> or by clicking on the corresponding toolbar
			button.
			</para>
			<para>
				<graphic srccredit="One Pane View" fileref="images/MergeOnePane.png"/>
				<graphic srccredit="Two Pane View" fileref="images/MergeTwoPane.png"/>
			</para>
	
			<para>
			In case you want to compare/merge three files TortoiseMerge 
			will show you the differences in a three pane view. This view 
			is also used if you need to resolve conflicted files.
			</para>
			<para>
				<graphic srccredit="Two Pane View" fileref="images/MergeThreePane.png"/>
			</para>
			<para>
			The left view shows you the differences of "Their" file 
			with the "Base" file, while the right view shows you the 
			differences of "Your" file with the "Base" file. The bottom 
			view shows you the result of merging "Base", "Yours" and 
			"Theirs" with possible conflicts.
			</para>
			<para>
			The relations between "Base", "Yours" and "Theirs" are explained in
			the diagram below:
			</para>
			<para>
				<graphic srccredit="file conflict" fileref="images/mergeprinciple.png"/>
			</para>
			<para>
			The base file represents the oldest version of a file, from where
			"You" and "They" start making changes. "Yours" represents 
			the base file with all the changes <emphasis>you</emphasis> made, 
			and "Theirs" is the file with all the changes 
			<emphasis>someone else</emphasis> made to the file.
			</para>		
		</sect2>

		<sect2 id="tmerge-ch-2-sect-1-2">
		
			<title>Applying Patches</title>
			
			<para>
			If you want to apply a patchfile you have to set both the path
			to the patchfile itself and to the folder where the patchfile
			should be applied to.
			</para>
			<caution>
				<para>
				Currently, only patchfiles in <emphasis>Unified Diff Format
				</emphasis> are supported. And only files which were generated
				from a Subversion working copy. Other formats like patchfiles
				generated by CVS are currently not supported!
				</para>
			</caution>
			
			<para>
			If TortoiseMerge is able to parse the patchfile it will show
			you a small window with all the files which have changes according
			to the patchfile.
			<graphic srccredit="Patch Filelist" fileref="images/MergePatchWindow.png"/>
			If the filename is shown in black, then the patch can be applied
			without any problems. That means the file is not outdated according
			to the patch.
			However, if the filename is shown in red, then the patch can't
			get applied because you already changed that file.
			</para>
			<para>
			But don't worry. If you're working with Subversion you can retreive
			an older version of the file and resolve the conflict. In fact,
			TortoiseMerge automatically tries to get that older version of the
			file and then shows you the diff between "Base" (the older version
			of the file), "Yours" (your file as it is currently in your working
			copy) and "Theirs" (the older version of the file with the patch
			already applied). Then you can resolve possible conflicts manually.
			</para>
			
			<para>
			Depending on whether TortoiseMerge can apply the patch directly or
			via fetching an older version of the file first it shows you
			a two pane view (patch applyable directly) or a three pane view
			(older version of file fetched).
			</para>
			
		</sect2>
	</sect1>

	<!-- ================================================================= -->
	<!-- ======================== SECTION 2 ============================== -->
	<!-- ================================================================= -->
	<sect1 id="tmerge-ch-2-sect-2">
	
		<title>Merging / Editing Conflicts</title>
		
		<para>
		TortoiseMerge not only <emphasis>shows</emphasis> you the differences
		between files but also let's you resolve conflicts or apply changes.
		</para>	
		<para>
		If you're in two pane view, then you can only edit the file in the right
		pane ("Yours"). To apply changes made in the left file ("Theirs"), 
		<action>right-click</action> on the changed lines and select <guimenuitem>
		Use text block from "theirs"</guimenuitem>. Then the changes from the left
		file are added to the right file.
		</para>
		<para>
		If you're in three pane view (or sometimes called <emphasis>merge view
		</emphasis>) you can only edit the file in the bottm view ("Merged"). As
		in two pane view, you can <action>right-click</action> on conflicted
		lines and either select <guimenuitem>Use text block from "theirs"
		</guimenuitem> or <guimenuitem>Use text block from "yours"</guimenuitem>.
		According to the command you've selected the changes are used in the 
		resulting file.
		</para>
	
	</sect1>

	<!-- ================================================================= -->
	<!-- ======================== SECTION 3 ============================== -->
	<!-- ================================================================= -->
	<sect1 id="tmerge-ch-2-sect-3">
	
		<title>Settings</title>
		<?dbhh topicname="HIDD_SETMAINPAGE"?>
		<?dbhh topicname="HIDD_SETCOLORPAGE"?>
		<?dbhh topicname="HIDD_SETCOLOR2PAGE"?>
		
		<para>
			<graphic srccredit="The Settings Main Page" fileref="images/SettingsGeneral.png"/>
		</para>
		<para>
			<graphic srccredit="The Settings Color Page" fileref="images/SettingsColors.png"/>
			<graphic srccredit="The Settings Color Page 2" fileref="images/SettingsColors2.png"/>
		</para>
	</sect1>
</chapter>

