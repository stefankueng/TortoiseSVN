<?xml version="1.0" encoding="UTF-8"?>
<sect1 id="tsvn-DUG-bugtracker">
	<title>Integration mit einem Bugtracking System</title>
	<indexterm>
		<primary>bugtracking</primary>
	</indexterm>
	<indexterm>
		<primary>bugtracker</primary>
	</indexterm>
	<indexterm>
		<primary>issuetracker</primary>
	</indexterm>
	<para>
	Es ist in der Software Entwicklung üblich, Änderungen am Sourcecode mit einer spezifischen
	ID in einem Issuetracker zu verbinden. Dies wird meist mittels eines pre-commit Aktionsskripts
	im Projektarchiv erreicht, welches vom Issuetracker zur Verfügung gestellt wird und die Log-Meldung
	einer Übertragung nach bestimmten Worten durchsucht.
	Dies ist jedoch sehr Fehleranfällig, da der Benutzer sich merken muss wie die Logmeldung
	auszusehen hat damit das Aktionsskript dies auch richtig erkennen kann.
	</para>
	<para>
	TortoiseSVN kann hier zweifach helfen:
		<orderedlist>
			<listitem>
				<para>Wenn der Benutzer eine Logmeldung eingibt, kann eine vordefinierte
			Zeile automatisch der Logmeldung an- oder vorgehängt werden. Dies reduziert das Risiko
			dass der Benutzer die Logmeldung falsch eingibt und das Aktionsskript die Eintragsnummer
			nicht mehr erkennen kann.</para>
				<para>Oder <application>TortoiseSVN</application> kann die Stelle in der Logmeldung
			hervorheben (während der Benutzer diese eingibt) welche vom Aktionsskript als Eintragsnummer
			erkannt wird. Auf diese Weise hat der Benutzer eine visuelle Bestätigung für die Korrektheit
			der Logmeldung.</para>
			</listitem>
			<listitem>
				<para>Wenn der Benutzer die Logmeldungen ansieht im Log Dialog, kann <application>TortoiseSVN</application>
			einen Link zum Eintrag erstellen und damit durch einen Klick den Browser gleich auf die
			entsprechende Seite führen.</para>
			</listitem>
		</orderedlist>
	</para>
	<para>
		Sie können eine Bugtracking Anwendung Ihrer Wahl in <application>TortoiseSVN</application>
		integrieren. Dafür müssen Sie ein paar Subversion Eigenschaften definieren, die mit
		<literal>bugtraq:</literal> beginnen: (<xref linkend="tsvn-DUG-propertypage"/>)
	</para>
	<para>
		Es gibt zwei verschiedene Wege um <application>TortoiseSVN</application> mit einem
		Bugtracker zu verbinden. Ein Weg basiert auf einfachen Zeichenketten, der andere
		basiert auf <literal>Regulären Ausdrücken</literal>.
		Die Eigenschaften welche von beiden Wegen benutzt werden sind:
		<variablelist>
			<varlistentry>
				<term>bugtraq:url</term>
				<listitem>
					<para>
						Hier geben Sie die Url zu Ihrem Bugtracking Programm ein. 
						Die Url muss eine gültige (sprich encodierte) Url sein und
						<literal>%BUGID%</literal> enthalten.
						<literal>%BUGID%</literal>
						wird später durch die Eintragsnummer 
						ersetzt. Dadurch springt der Client direkt zu dem Eintrag. Wenn 
						Sie diese Eigenschaft weglassen, zeigt 
						<application>TortoiseSVN</application> später nur die Eintragsnummer
						an und keinen Verweis. 
						Bei <application>TortoiseSVN</application> z.B. 
						<literal>http://tortoisesvn.tigris.org/issues/show_bug.cgi?id=%BUGID%</literal>
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>bugtraq:warnifnoissue</term>
				<listitem>
					<para>
						Wenn die Eigenschaft auf <literal>true</literal> gesetzt ist, warnt Sie 
						<application>TortoiseSVN</application>, falls das Eingabefeld
						für die Eintragsnummer im Übertragen Dialog leer gelassen wurde. 
						Das ist nur eine Erinnerungshilfe, falls der Benutzer die Eingabe 
						vergessen hat. Gültige Werte: <literal>true/false</literal>. Wenn keine 
						Eigenschaft definiert ist, wird <literal>false</literal> angenommen.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		Mit dem einfachen Weg (Zeichenketten) zeigt <application>TortoiseSVN</application> dem
		Benutzer ein zusätzliches Eingabefeld für die Eintragsnummer. Es wird dann eine zusätzliche
		Zeile der Logmeldung an- oder vorgehängt.
		<variablelist>
			<varlistentry>
				<term>bugtraq:message</term>
				<listitem>
					<para>
						<emphasis>Diese Eigenschaft aktiviert das Bugtracking System. </emphasis>
						Sie wird vom Client benutzt, um eine extra Zeile am
						Ende des Logtextes hinzuzufügen. Dafür muss sie den Text <literal>%BUGID%</literal>
						enthalten, welcher beim Übertragen durch die Eintragsnummer ersetzt 
						wird. Mithilfe dieses Textes kann Ihr Bugtracking Programm die Log 
						Meldungen parsen und die Revisionen einem Eintrag zuordnen. 
						<application>TortoiseSVN</application> benutzt z.B. <literal>Issue : %BUGID%</literal>, 
						aber das hängt von Ihrem Programm ab.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>bugtraq:append</term>
				<listitem>
					<para>
						Diese Eigenschaft definiert ob die Eintragsnummer an das Ende angehengt wird 
						oder vor die Logmeldung eingefügt wird. Gültige Werte: <literal>true/false</literal>. 
						Wenn keine Eigenschaft definiert ist, wird <literal>true</literal> angenommen.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>bugtraq:label</term>
				<listitem>
					<para>
						Dieser Text wird von <application>TortoiseSVN</application>
						im Übertragen Dialog angezeigt. Er beschreibt das Eingabefeld 
						für die Eintragsnummer. Wird er weggelassen, wird 
						<guilabel>Bug-ID / EintragsNr: </guilabel>
						angezeigt. Beachten Sie bitte, dass der Text nicht zu lang ist, 
						da er sonst evtl. in <application>TortoiseSVN</application> oder 
						in anderen Clients einfach abgeschnitten wird. 
						(empfohlen werden max 20 bis 25 Zeichen)
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>bugtraq:number</term>
				<listitem>
					<para>
						Auf <literal>true</literal> gesetzt, werden, ausser dem Komma nur Zahlen 
						im Bugtracking Eingabefeld akzeptiert. <literal>False</literal>
						erlaubt auch die Eingabe von Buchstaben.
						Gültige Werte: <literal>true/false</literal>. Wenn keine 
						Eigenschaft definiert ist, wird <literal>true</literal> angenommen.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		Beim Weg mit den <literal>Regulären Ausdrücken</literal> zeigt <application>TortoiseSVN</application>
		kein separates Eingabefeld an sondern hebt den Teil der Logmeldung hervor welche von
		dem Aktionsskript als Eintragsnummer erkannt wird. Die Hervorhebung erfolgt während der Benutzer
		die Logmeldung eingibt.
		Dies bedeutet auch, dass die Eintragsnummer irgendwo in der Logmeldung stehen kann und nicht nur
		in einer separaten Zeile!
		<tip>
			<para>
				Auch wenn Sie gar keinen Issue Tracker mit pre-commit Aktionsskript haben, können
				Sie diese Funktion auch dazu nutzen, um Eintragsnummern welche Sie in Ihren Logmeldungen
				erwähnt haben in einen Link zum Issuetracker zu verwandeln.
			</para>
		</tip>
		<variablelist>
			<varlistentry>
				<term>bugtraq:logregex</term>
				<listitem>
					<para>
						Diese Eigenschaft enthält entweder eine oder zwei Reguläre Ausdrücke, getrennt
						durch eine neue Zeile.
					</para>
					<para>
						Wenn nur ein Regulärer Ausdruck gesetzt wird, dann müssen die reinen Issuenummern
						in den Gruppen des Ausdrucks gefunden werden. Als Beispiel:
						<literal>[Ii]ssue(?:s)? #?(\d+)</literal>
					</para>
					<para>
						Wenn zwei reguläre Ausdrücke gesetzt sind wird der erste Ausdruck verwendet
						um eine Zeichenkette zu finden welche die Issuenummer enthält, aber nicht nur
						die Issuenummer (zum Beispiel: "Issue #123" oder "Löst issue 123").
						Der zweite reguläre Ausdruck wird dann verwendet, um die reinen Issuenummern
						aus dieser Zeichenkette zu extrahieren. Zum Beispiel:
					</para>
					<para>
						Wenn Sie alle Zeichenketten "issue #XXX" und "issue #123, #456" in einer
						Logmeldung finden möchten, können Sie folgende regulären Ausdrücke verwenden:
						<literal>[Ii]ssue #?(\d+)(,? ?#'(\d+))+</literal> mit dem zweiten Ausruck als
						<literal>(\d+)</literal>
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		<important>
			<title>Setzen Sie die Eigenschaften in Ordnern</title>
			<para>
				Die obigen Eigenschaften müssen auf Ordner gesetzt sein, damit das
				System richtig funktioniert. 
				Wenn Sie sicher gehen können, dass
				jeder Benutzer z.B. von <filename>trunk/</filename> auscheckt, definieren Sie die Eigenschaften
				für <filename>trunk/</filename>.
				<application>TortoiseSVN</application> wird dann die Ordnerstruktur vom aktuellen
				bis zum obersten Element (z.B. <filename>trunk/</filename>) durchsuchen, ob die Eigenschaften 
				definiert sind.
				Wenn sie die Eigenschaften in einem beliebigen Unterordner
				setzen, überschreiben diese die Einstellungen in einem übergeordneten Ordner. 
			</para>
		</important>
	</para>
</sect1>
